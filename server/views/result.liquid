{% layout "server/layouts/base.liquid" %}

{% block content %}
<div class="quiz-results-container">
  <h1 class="quiz-results-title">Quiz Results</h1>
  <p class="quiz-score">Your Score: <span>{{ score }}</span> / <span>{{ total }}</span></p>

  <div class="toggle-all">
    <button type="button" class="toggle-all-button">Show All Answers</button>
  </div>

  <div class="qcontainer">
    <ul class="results-list">
      {% for result in results %}
      <li class="result-item {% if result.isCorrect %}correct{% else %}incorrect{% endif %}">
        <div class="result-header">
          <div class="question">
            <strong>Question {{ forloop.index }}:</strong> {{ result.question }}
          </div>
          <div class="result-status">
            {% if result.isCorrect %} Correct{% else %} Incorrect{% endif %}
          </div>
        </div>
        <div class="answer-details">
          <div class="answers">
            <p>Your answer: <span class="user-answer">{{ result.userAnswer | default: "No answer provided" }}</span></p>
            <p>Correct answer: <span class="correct-answer">{{ result.correctAnswer }}</span></p>
          </div>
        </div>
      </li>
      {% endfor %}
    </ul>
  </div>

  <a href="/" class="button">Back to Home</a>
</div>

{% endblock %}